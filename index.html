<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="Agendador de Tarefas Web - Organize suas tarefas de forma eficiente">
    <title>Task Scheduler - Agendador de Tarefas</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="TaskScheduler">
    <meta name="application-name" content="Task Scheduler">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-TileColor" content="#6366f1">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/icon-72x72.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="167x167" href="icons/icon-192x192.png">
    
    <!-- Splash Screens for iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <span class="logo-icon">üìã</span>
                <h1>Task Scheduler</h1>
            </div>
            <div class="header-actions">
                <button id="toggleDarkMode" class="btn btn-icon" aria-label="Alternar modo escuro" title="Alternar modo escuro">
                    <span class="icon">üåô</span>
                </button>
                <div class="notification-badge" id="pendingBadge" title="Tarefas pendentes">
                    <span class="icon">üîî</span>
                    <span class="badge-count" id="badgeCount">0</span>
                </div>
                <button id="menuBtn" class="btn btn-icon mobile-only" aria-label="Menu" title="Menu">
                    <span class="icon">‚ò∞</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Mobile Stats Bar -->
    <div class="mobile-stats-bar" id="mobileStatsBar">
        <div class="stats-mini">
            <div class="stat-mini-item" id="todayCountBadge">
                <span class="stat-mini-value" id="todayTasksCount">0</span>
                <span class="stat-mini-label">Hoje</span>
            </div>
            <div class="stat-mini-item pending">
                <span class="stat-mini-value" id="pendingTasksCount">0</span>
                <span class="stat-mini-label">Pendentes</span>
            </div>
            <div class="stat-mini-item completed">
                <span class="stat-mini-value" id="completedTasksCount">0</span>
                <span class="stat-mini-label">Conclu√≠das</span>
            </div>
            <div class="stat-mini-item overdue">
                <span class="stat-mini-value" id="overdueTasksCount">0</span>
                <span class="stat-mini-label">Atrasadas</span>
            </div>
        </div>
    </div>

    <!-- Tab Navigation -->
    <nav class="tab-navigation" role="tablist" aria-label="Filtros de tarefas">
        <button class="tab-btn active" data-tab="today" role="tab" aria-selected="true" id="tabToday">
            <span class="tab-icon">üìÖ</span>
            <span class="tab-label">Hoje</span>
            <span class="tab-badge" id="todayBadge">0</span>
        </button>
        <button class="tab-btn" data-tab="week" role="tab" aria-selected="false" id="tabWeek">
            <span class="tab-icon">üìÜ</span>
            <span class="tab-label">Semana</span>
        </button>
        <button class="tab-btn" data-tab="all" role="tab" aria-selected="false" id="tabAll">
            <span class="tab-icon">üìã</span>
            <span class="tab-label">Todas</span>
        </button>
    </nav>

    <!-- Main Container -->
    <main class="main-container">
        <!-- Sidebar with Statistics (Desktop Only) -->
        <aside class="sidebar desktop-only" id="sidebar">
            <div class="stats-card">
                <h2>üìä Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-value" id="totalTasks">0</span>
                        <span class="stat-label">Total</span>
                    </div>
                    <div class="stat-item completed">
                        <span class="stat-value" id="completedTasks">0</span>
                        <span class="stat-label">Conclu√≠das</span>
                    </div>
                    <div class="stat-item pending">
                        <span class="stat-value" id="pendingTasks">0</span>
                        <span class="stat-label">Pendentes</span>
                    </div>
                    <div class="stat-item overdue">
                        <span class="stat-value" id="overdueTasks">0</span>
                        <span class="stat-label">Atrasadas</span>
                    </div>
                </div>
                <div class="completion-rate">
                    <div class="rate-header">
                        <span>Taxa de Conclus√£o</span>
                        <span id="completionRate">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
            </div>

            <!-- Import/Export Actions -->
            <div class="data-actions">
                <button id="exportBtn" class="btn btn-secondary" title="Exportar tarefas">
                    <span class="icon">üì§</span> Exportar JSON
                </button>
                <button id="importBtn" class="btn btn-secondary" title="Importar tarefas">
                    <span class="icon">üì•</span> Importar JSON
                </button>
                <input type="file" id="importFile" accept=".json" hidden>
            </div>
        </aside>

        <!-- Content Area -->
        <div class="content">
            <!-- Toolbar (Desktop) -->
            <div class="toolbar desktop-only">
                <div class="search-container">
                    <span class="search-icon">üîç</span>
                    <input type="search" id="searchInput" placeholder="Buscar tarefas..." aria-label="Buscar tarefas">
                </div>
                
                <div class="filter-group">
                    <div class="filter-item">
                        <label for="statusFilter" class="sr-only">Filtrar por status</label>
                        <select id="statusFilter" aria-label="Filtrar por status">
                            <option value="all">Todas</option>
                            <option value="active">Ativas</option>
                            <option value="completed">Conclu√≠das</option>
                        </select>
                    </div>
                    
                    <div class="filter-item">
                        <label for="priorityFilter" class="sr-only">Filtrar por prioridade</label>
                        <select id="priorityFilter" aria-label="Filtrar por prioridade">
                            <option value="all">Todas Prioridades</option>
                            <option value="high">Alta</option>
                            <option value="medium">M√©dia</option>
                            <option value="low">Baixa</option>
                        </select>
                    </div>
                    
                    <div class="filter-item">
                        <label for="categoryFilter" class="sr-only">Filtrar por categoria</label>
                        <select id="categoryFilter" aria-label="Filtrar por categoria">
                            <option value="all">Todas Categorias</option>
                            <option value="work">üîµ Trabalho</option>
                            <option value="personal">üü£ Pessoal</option>
                            <option value="study">üü¢ Estudos</option>
                            <option value="health">üî¥ Sa√∫de</option>
                            <option value="shopping">üü° Compras</option>
                            <option value="other">‚ö™ Outros</option>
                        </select>
                    </div>
                    
                    <div class="filter-item">
                        <label for="dateFilter" class="sr-only">Filtrar por data</label>
                        <select id="dateFilter" aria-label="Filtrar por data">
                            <option value="all">Todas as Datas</option>
                            <option value="today">Hoje</option>
                            <option value="week">Esta Semana</option>
                            <option value="month">Este M√™s</option>
                        </select>
                    </div>
                </div>

                <div class="view-toggle">
                    <button id="listViewBtn" class="btn btn-view active" aria-label="Visualiza√ß√£o em lista" title="Lista">
                        <span class="icon">üìã</span>
                    </button>
                    <button id="cardViewBtn" class="btn btn-view" aria-label="Visualiza√ß√£o em cards" title="Cards">
                        <span class="icon">üì¶</span>
                    </button>
                </div>
            </div>

            <!-- Mobile Search Bar -->
            <div class="mobile-search-bar mobile-only">
                <div class="search-container">
                    <span class="search-icon">üîç</span>
                    <input type="search" id="mobileSearchInput" placeholder="Buscar tarefas..." aria-label="Buscar tarefas">
                </div>
            </div>

            <!-- Pull to Refresh Indicator -->
            <div class="pull-to-refresh" id="pullToRefresh">
                <div class="pull-spinner"></div>
                <span>Atualizando...</span>
            </div>

            <!-- Tasks Container -->
            <div id="tasksContainer" class="tasks-container list-view">
                <!-- Task Groups will be rendered here -->
                
                <!-- Empty State -->
                <div class="empty-state" id="emptyState">
                    <span class="empty-icon">üìù</span>
                    <h3>Nenhuma tarefa encontrada</h3>
                    <p>Clique no bot√£o + para adicionar sua primeira tarefa</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Floating Action Button -->
    <button id="addTaskBtn" class="fab" aria-label="Adicionar nova tarefa" title="Adicionar tarefa">
        <span class="fab-icon">+</span>
    </button>

    <!-- Task Modal -->
    <div class="modal-overlay" id="taskModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modalTitle">Nova Tarefa</h2>
                <button class="modal-close" id="closeModal" aria-label="Fechar modal">√ó</button>
            </div>
            <form id="taskForm" class="modal-body">
                <!-- Quick Add Mode -->
                <div class="quick-add-section" id="quickAddSection">
                    <div class="form-group">
                        <label for="taskTitle">T√≠tulo *</label>
                        <input type="text" id="taskTitle" required placeholder="O que voc√™ precisa fazer?" maxlength="100" autocomplete="off">
                        <span class="error-message" id="titleError"></span>
                    </div>
                    
                    <div class="quick-date-buttons">
                        <button type="button" class="quick-date-btn active" data-date="today">Hoje</button>
                        <button type="button" class="quick-date-btn" data-date="tomorrow">Amanh√£</button>
                        <button type="button" class="quick-date-btn" data-date="nextweek">Pr√≥x. Semana</button>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="taskDate">Data</label>
                            <input type="date" id="taskDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="taskTime">Hor√°rio</label>
                            <input type="time" id="taskTime">
                        </div>
                    </div>
                </div>
                
                <!-- Advanced Options Toggle -->
                <button type="button" class="toggle-advanced-btn" id="toggleAdvancedBtn">
                    <span class="toggle-icon">‚öôÔ∏è</span>
                    <span class="toggle-text">Mais op√ß√µes</span>
                    <span class="toggle-arrow">‚ñº</span>
                </button>
                
                <!-- Advanced Options -->
                <div class="advanced-options hidden" id="advancedOptions">
                    <div class="form-group">
                        <label for="taskDescription">Descri√ß√£o</label>
                        <textarea id="taskDescription" placeholder="Detalhes adicionais..." rows="2" maxlength="500"></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="taskPriority">Prioridade</label>
                            <div class="priority-selector" role="radiogroup" aria-label="Selecionar prioridade">
                                <label class="priority-option low">
                                    <input type="radio" name="priority" value="low">
                                    <span class="priority-icon">üü¢</span>
                                    <span class="priority-label">Baixa</span>
                                </label>
                                <label class="priority-option medium">
                                    <input type="radio" name="priority" value="medium" checked>
                                    <span class="priority-icon">üü°</span>
                                    <span class="priority-label">M√©dia</span>
                                </label>
                                <label class="priority-option high">
                                    <input type="radio" name="priority" value="high">
                                    <span class="priority-icon">üî¥</span>
                                    <span class="priority-label">Alta</span>
                                </label>
                            </div>
                            <select id="taskPriority" class="hidden" required>
                                <option value="medium">üü° M√©dia</option>
                                <option value="high">üî¥ Alta</option>
                                <option value="low">üü¢ Baixa</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="taskCategory">Categoria</label>
                        <div class="category-selector" role="radiogroup" aria-label="Selecionar categoria">
                            <label class="category-option work">
                                <input type="radio" name="category" value="work" checked>
                                <span class="category-icon">üíº</span>
                                <span class="category-label">Trabalho</span>
                            </label>
                            <label class="category-option personal">
                                <input type="radio" name="category" value="personal">
                                <span class="category-icon">üë§</span>
                                <span class="category-label">Pessoal</span>
                            </label>
                            <label class="category-option study">
                                <input type="radio" name="category" value="study">
                                <span class="category-icon">üìö</span>
                                <span class="category-label">Estudos</span>
                            </label>
                            <label class="category-option health">
                                <input type="radio" name="category" value="health">
                                <span class="category-icon">‚ù§Ô∏è</span>
                                <span class="category-label">Sa√∫de</span>
                            </label>
                            <label class="category-option shopping">
                                <input type="radio" name="category" value="shopping">
                                <span class="category-icon">üõí</span>
                                <span class="category-label">Compras</span>
                            </label>
                            <label class="category-option other">
                                <input type="radio" name="category" value="other">
                                <span class="category-icon">üìå</span>
                                <span class="category-label">Outros</span>
                            </label>
                        </div>
                        <select id="taskCategory" class="hidden" required>
                            <option value="work">üîµ Trabalho</option>
                            <option value="personal">üü£ Pessoal</option>
                            <option value="study">üü¢ Estudos</option>
                            <option value="health">üî¥ Sa√∫de</option>
                            <option value="shopping">üü° Compras</option>
                            <option value="other">‚ö™ Outros</option>
                        </select>
                    </div>
                </div>
                
                <input type="hidden" id="taskId">
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">Cancelar</button>
                    <button type="submit" class="btn btn-primary" id="saveTaskBtn">
                        <span class="btn-icon">‚úì</span>
                        Salvar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal" role="dialog" aria-modal="true">
        <div class="modal modal-sm">
            <div class="modal-header">
                <h2>Confirmar Exclus√£o</h2>
                <button class="modal-close" id="closeDeleteModal" aria-label="Fechar modal">√ó</button>
            </div>
            <div class="modal-body">
                <p>Tem certeza que deseja excluir esta tarefa?</p>
                <p class="text-muted">Esta a√ß√£o n√£o pode ser desfeita.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelDeleteBtn">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Excluir</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container" aria-live="polite"></div>

    <!-- Menu Overlay (Mobile) -->
    <div class="menu-overlay" id="menuOverlay">
        <div class="menu-panel">
            <div class="menu-header">
                <h3>Configura√ß√µes</h3>
                <button class="menu-close" id="menuClose">√ó</button>
            </div>
            <div class="menu-content">
                <div class="menu-section">
                    <h4>Filtros</h4>
                    <div class="menu-filters">
                        <select id="mobileStatusFilter" aria-label="Filtrar por status">
                            <option value="all">Todas</option>
                            <option value="active">Ativas</option>
                            <option value="completed">Conclu√≠das</option>
                        </select>
                        <select id="mobilePriorityFilter" aria-label="Filtrar por prioridade">
                            <option value="all">Todas Prioridades</option>
                            <option value="high">Alta</option>
                            <option value="medium">M√©dia</option>
                            <option value="low">Baixa</option>
                        </select>
                        <select id="mobileCategoryFilter" aria-label="Filtrar por categoria">
                            <option value="all">Todas Categorias</option>
                            <option value="work">üíº Trabalho</option>
                            <option value="personal">üë§ Pessoal</option>
                            <option value="study">üìö Estudos</option>
                            <option value="health">‚ù§Ô∏è Sa√∫de</option>
                            <option value="shopping">üõí Compras</option>
                            <option value="other">üìå Outros</option>
                        </select>
                    </div>
                </div>
                <div class="menu-section">
                    <h4>Dados</h4>
                    <button id="mobileExportBtn" class="btn btn-secondary btn-full">
                        <span class="icon">üì§</span> Exportar Tarefas
                    </button>
                    <button id="mobileImportBtn" class="btn btn-secondary btn-full">
                        <span class="icon">üì•</span> Importar Tarefas
                    </button>
                </div>
                <div class="menu-section">
                    <h4>Notifica√ß√µes</h4>
                    <button id="enableNotificationsBtn" class="btn btn-secondary btn-full">
                        <span class="icon">üîî</span> Ativar Notifica√ß√µes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/storage.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/push-notifications.js"></script>
    <script src="js/pwa-install.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
